
<a data-route="{% url 'course:create_enrollment_records' rowid=item.id %}" href="javascript:;" onclick="createEnrollmentRecords(this)" class="btn btn-sm btn-secondary ml-3 p-0 pl-1 pr-1 mr-3" style="font-size:0.7rem !important;" tooltip title="Populate Course Subjects"><i class="fa fa-file"></i>  Populate Course Subjects</a>


{% block extra_js %}
<script>

    function createEnrollmentRecords(item){
        let route=$(item).data('route');

        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success ml-5',
                cancelButton: 'btn btn-secondary mr-5'
            },
            buttonsStyling: false
            });

		swalWithBootstrapButtons.fire({
		    title: "Confirm",
		    text: "Are you sure you want to create subject records for the course ?",
		    icon: "info",
		    showCancelButton: true,
            confirmButtonText: 'Confirm',
            cancelButtonText: 'Cancel',
            reverseButtons: true
		}).then((result) => {
            if(result.value){
                $.ajax({
                    url:route,
                    method:'GET',
                    success:function(response){
                        if(response.status == 'success'){
                            Swal.fire({
                                position: 'center',
                                icon: 'success',
                                title: '<h5>Successfully created records for the course !!</h5>',
                                showConfirmButton: false,
                                timer: 1000
                            })

                           setTimeout(()=>{
                            location.reload()
                           },1500) 
                        }else{
                            Swal.fire({
                                position: 'center',
                                icon: 'error',
                                title: response.message,
                                showConfirmButton: false,
                                timer: 1000
                            })
                        }
                    },
                    error:function(){
                        Swal.fire({
                            position: 'center',
                            icon: 'error',
                            title: 'An error occured !',
                            showConfirmButton: false,
                            timer: 1000
                        })
                    }
                })
            }
        });

    }
</script>
{%endblock%}
<a data-route="{% url 'master:send_user_mail' id %}" href="javascript:;" onclick="sendUserMail(this)" class="btn btn-sm btn-secondary ml-3 p-0 pl-1 pr-1 mr-3" style="font-size:0.7rem !important;" title="Send registration mail to user"><i class="fa fa-paper-plane"></i> Send</a>

{% block extra_js %}
<script>

    function sendUserMail(item){
        let route=$(item).data('route');

        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success ml-5',
                cancelButton: 'btn btn-secondary mr-5'
            },
            buttonsStyling: false
            });
		swalWithBootstrapButtons.fire({
		    title: "Confirm",
		    text: "Are you sure you want to send e-mail ?",
		    icon: "info",
		    showCancelButton: true,
            confirmButtonText: 'Confirm',
            cancelButtonText: 'Cancel',
            reverseButtons: true
		}).then((result) => {
            if(result.value){
                CUSTOMJS.tmpLoading('Sending Mail...',true);
                $.ajax({
                    url:route,
                    method:'GET',
                    success:function(response){
                        if(response.status == 'success'){
                            Swal.fire({
                                position: 'center',
                                icon: 'success',
                                title: '<h5>Mail sent successfully !!</h5>',
                                showConfirmButton: false,
                                timer: 1000
                            })
                            CUSTOMJS.tmpLoading(false);

                           setTimeout(()=>{
                            location.reload()
                           },1500) 
                        }else{
                            Swal.fire({
                                position: 'center',
                                icon: 'error',
                                title: response.message,
                                showConfirmButton: false,
                                timer: 1000
                            })
                            CUSTOMJS.tmpLoading(false);
                        }
                    },
                    error:function(error){
                        Swal.fire({
                            position: 'center',
                            icon: 'error',
                            title: error.message,
                            showConfirmButton: false,
                            timer: 1000
                        })
                        CUSTOMJS.tmpLoading(false);

                    }
                })
            }
        });

    }
</script>
{%endblock%}